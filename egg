-- Updated Roblox Egg Refresher Script - Black background, red detect button, smaller frames, bigger title

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local screenGui = Instance.new("ScreenGui", playerGui)
screenGui.ResetOnSpawn = false

local TweenService = game:GetService("TweenService")
local Debris = game:GetService("Debris")

local selectedEgg = nil
local detectCooldown = false

local petNames = {
    ["Bug Egg"] = "Snail",
    ["Night Egg"] = "Moon Cat",
    ["Anti-Bee Egg"] = "Wasp",
    ["Oasis Egg"] = "Sand Snake",
    ["Paradise Egg"] = "Capybara"
}

local scannedEggs = {}

local function makeDraggable(frame)
    frame.Active = true
    frame.Draggable = true
end

-- Start Frame
local startFrame = Instance.new("Frame", screenGui)
startFrame.Size = UDim2.new(0, 220, 0, 100)
startFrame.Position = UDim2.new(0.4, 0, 0.4, 0)
startFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Instance.new("UICorner", startFrame)
makeDraggable(startFrame)

local startButton = Instance.new("TextButton", startFrame)
startButton.Size = UDim2.new(0.8, 0, 0.5, 0)
startButton.Position = UDim2.new(0.1, 0, 0.25, 0)
startButton.Text = "Start"
Instance.new("UICorner", startButton)

local mainSquare = Instance.new("Frame", screenGui)
mainSquare.Size = UDim2.new(0, 250, 0, 220)
mainSquare.Position = UDim2.new(0.4, 0, 0.35, 0)
mainSquare.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainSquare.Visible = false
Instance.new("UICorner", mainSquare)
makeDraggable(mainSquare)

startButton.MouseButton1Click:Connect(function()
    startFrame.Visible = false
    mainSquare.Visible = true
end)

-- Floating Scanning Pet
local function addScanningLabel(eggPart, petName, showName)
    local billboard = Instance.new("BillboardGui", eggPart)
    billboard.Size = UDim2.new(0, 120, 0, 50)
    billboard.Adornee = eggPart
    billboard.AlwaysOnTop = true

    local label = Instance.new("TextLabel", billboard)
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = showName and ("Scanning Pet: " .. petName) or "Scanning Pet"
    label.TextColor3 = Color3.new(1, 1, 0)
    label.Font = Enum.Font.GothamBold
    label.TextScaled = true

    scannedEggs[#scannedEggs + 1] = {Part = eggPart, Billboard = billboard, PetName = petName}
end

-- Detect & Refresh Buttons
local detectButton = Instance.new("TextButton", mainSquare)
detectButton.Size = UDim2.new(0.8, 0, 0.15, 0)
detectButton.Position = UDim2.new(0.1, 0, 0.25, 0)
detectButton.Text = "Detect Egg"
detectButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
Instance.new("UICorner", detectButton)

local refreshButton = Instance.new("TextButton", mainSquare)
refreshButton.Size = UDim2.new(0.8, 0, 0.15, 0)
refreshButton.Position = UDim2.new(0.1, 0, 0.45, 0)
refreshButton.Text = "Refresh"
refreshButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
refreshButton.AutoButtonColor = false
refreshButton.Active = false
Instance.new("UICorner", refreshButton)

detectButton.MouseButton1Click:Connect(function()
    if detectCooldown or not selectedEgg then return end
    detectCooldown = true
    refreshButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    refreshButton.Active = false

    detectButton.Text = "Scanning..."
    for _, obj in ipairs(workspace:GetDescendants()) do
        if (obj:IsA("Model") or obj:IsA("Part")) and string.find(obj.Name:lower(), selectedEgg:lower()) then
            addScanningLabel(obj, petNames[selectedEgg] or "Unknown", false)
        end
    end

    local timeRemaining = 600
    task.spawn(function()
        while timeRemaining > 0 do
            task.wait(1)
            timeRemaining -= 1
            detectButton.Text = string.format("Scanning (%d:%02d)", math.floor(timeRemaining / 60), timeRemaining % 60)
        end
        detectCooldown = false
        detectButton.Text = "Detect Egg"
        refreshButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
        refreshButton.Active = true
    end)
end)

refreshButton.MouseButton1Click:Connect(function()
    for _, data in ipairs(scannedEggs) do
        local billboard = data.Billboard
        if billboard and billboard.Parent then
            if billboard:FindFirstChildOfClass("TextLabel") then
                billboard.TextLabel.Text = "Scanning Pet: " .. data.PetName
            end
        end
    end
end)

-- Title
local titleLabel = Instance.new("TextLabel", mainSquare)
titleLabel.Size = UDim2.new(1, 0, 0.1, 0)
titleLabel.Position = UDim2.new(0, 0, 0.7, 0)
titleLabel.Text = "Egg Refresher - Real Scan"
titleLabel.BackgroundTransparency = 1
titleLabel.TextSize = 20
